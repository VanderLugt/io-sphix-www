
@{
    ViewData["Title"] = "Index";
}

<h2>Index</h2>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.js"></script>
<script src="https://media.twiliocdn.com/sdk/js/video/releases/1.19.2/twilio-video.min.js" type="text/javascript"></script>

<script>

    $(document).ready(function () {
      $.get('/GetToken',  // url
          function (data, textStatus, jqXHR) {  // success callback
              console.log(JSON.stringify(data));

           var token =data.token;
       // console.log(token);
        var Video = require('twilio-video');

        // Connect with audio-only
        Video.connect(token, {
            name: 'TestRoom1',
            audio: true
        }).then(function (room) {
            room.on('participantConnected', function (participant) {
                console.log(participant.identity + ' has connected');
            });

            room.once('disconnected', function () {
                console.log('You left the Room:', room.name);
            });
        });

    });
       
    });
</script>
